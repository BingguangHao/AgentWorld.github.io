<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
<meta charset="utf-8">
<title>inclusionAI | FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="apple-touch-icon" sizes="180x180" href='/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='/favicon-16x16.png'>
<link rel="manifest" href='/site.webmanifest'>

<link href='/css/fa6.min.css' rel="stylesheet" type="text/css">



<link rel="stylesheet" href="/css/style.css">


<link href='/css/style.min.css' rel="stylesheet" type="text/css">
<link rel="stylesheet" href='/css/custom.css'>

<meta property="og:title" content="inclusionAI | FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement" />




<meta name="description" content="Embrace the power of the model itself.">
<meta property="og:title" content=" | " />
<meta property="og:site_name" content="inclusionAI">
<meta property="og:description" content="Embrace the power of the model itself.">
<meta property="og:url" content="http://localhost:1313/blog/chapter-1/">
<meta property="og:type" content="article">
<meta property="og:locale" content="">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@tech_chiba">

<link rel="canonical" href="http://localhost:1313/blog/chapter-1/">

<meta name="twitter:description" content="Embrace the power of the model itself.">
<meta property="article:published_time" content="2025-05-30T00:00:00&#43;00:00">
<meta property="article:updated_time" content="2025-05-30T00:00:00&#43;00:00">





<meta property="og:image" content="http://localhost:1313/">


<meta name="twitter:title" content="FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement">
<link rel="preload" href='/css/sweetalert2.min.css' as="style"
    onload="this.onload=null;this.rel='stylesheet'">

</head>

<body class="flex flex-col min-h-screen">
  <main class="flex-grow"><header>
    <div id="overlay">
        <ul class="text-center list-none text-white text-3xl">
            
            <li class="p-2">
                <a href="/products/">
                    <span>Products</span>
                </a>
            </li>
            
            <li class="p-2">
                <a href="/blog/">
                    <span>Blog</span>
                </a>
            </li>
            
            <li class="p-2">
                <a href="/about/">
                    <span>About</span>
                </a>
            </li>
            
            <li class="p-2">
                <a href="/contact/">
                    <span>Contact</span>
                </a>
            </li>
            
        </ul>
    </div>
    <nav class="flex items-center justify-between flex-wrap bg-opacity-100 p-8">
        <div class="flex items-center flex-shrink-0 text-xl text-grey-900 mr-6">
            <a href="http://localhost:1313/"><img alt="Ant Group"
                    class="h-14 mr-3" src="/img/logo/antgroup.png"></a>
        </div>
        <div class="block lg:hidden">
            <div id="hamburgerbtn" class="flex cursor-pointer items-center w-14 h-10 py-2 rounded mopen">
                <span class="top"></span>
                <span class="middle"></span>
                <span class="bottom"></span>
            </div>
        </div>
        <div class="hidden w-full block flex-grow lg:flex lg:items-center lg:w-auto" id="mobileMenu">
            <div class="text-lg lg:flex-grow">
            </div>
            <div class="text-lg">
                
                <a href="/products/"
                    class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-black hover:opacity-60 mr-8">
                    Products
                </a>
                
                <a href="/blog/"
                    class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-black hover:opacity-60 mr-8">
                    Blog
                </a>
                
                <a href="/about/"
                    class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-black hover:opacity-60 mr-8">
                    About
                </a>
                
                <a href="/contact/"
                    class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-black hover:opacity-60 mr-8">
                    Contact
                </a>
                
            </div>
        </div>
    </nav>
</header><div class="scroll-top rounded-full">
      <span class="icon-keyboard_arrow_up text-2xl"></span>
    </div>
<div class="mx-auto my-10 max-w-6xl">
    <div class="mx-3 col-span-3 lg:col-span-2 px-2">
        <h1 class="title text-5xl font-bold mb-3">FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement</h1>
        <section class="mb-4 text-lg">
            <h4 id="date" class="flex flex-row items-center"><span class="icon-access_time text-2xl mr-2"></span>
                2025/05/30 </h4>
            
            
        </section>
        
        <div class="content prose md:prose-lg lg:prose-xl max-w-none py-1"><p><a href="https://github.com/BingguangHao/FunReason/">ðŸ“–GitHub</a>         <a href="https://arxiv.org/pdf/2505.20192">ðŸ“‘Paper</a>         <a href="https://huggingface.co/Bingguang/FunReason">ðŸ¤—Hugging Face</a></p>
<hr>
<p>Function call becomes a fundamental concept in Large Language Models, enabling more efficient interaction.</p>
<p>We propose FunReason, FunReason enhances LLMs&rsquo; function calling by balancing reasoning and execution accuracy. Using automated data refinement and Self-Refinement Multiscale Loss (SRML), it generates high-quality training data for query parseability, reasoning coherence, and precise function calls. SRML optimizes both aspects during training, matching GPT-4o performance while minimizing forgetting. <strong>We will release all the data that refined in this process, whcih contains 60k high quality CoT data for function call.</strong></p>
<p><strong>Overview of FunReason&rsquo;s data refinement pipeline.</strong> The pipeline consists of five stages: Function Call Classification, Query and Tool Identification, CoT Identification, Function and Parameter Identification, and Format Identification. Each stage ensures specific aspects of data quality, with failing examples either being discarded or regenerated.</p>
<figure><img src="/images/post1/datamake.png">
</figure>

<p><strong>Self-Refinement Multiscale Loss.</strong> Traditional loss functions often overemphasize the lengthy reasoning process at the expense of function call accuracy. The inherent trade-off between reasoning quality and function call correctness, leading to the development of our balanced approach.</p>
<figure><img src="/images/post1/MSL.png">
</figure>

<p><strong>Self Refinement Strategy.</strong> Following the MSL training, we employ a Self-Refinement strategy to further enhance the model capabilities. In this phase, the MSL-trained model samples from the original xLAM dataset, generating its own Chain-of-Thought reasoning and corresponding function calls. Subsequently, this self-generated data is fed into the data refinement pipeline for automated inspection and improvement. Only the refined data, having passed the rigorous quality checks of the data refinement, is then used to further update the model&rsquo;s parameters. This iterative process allows the model to learn from its own improved outputs, leading to continuous self-enhancement of its function calling and reasoning abilities.</p>
<figure><img src="/images/post1/training.png">
</figure>

<h2 id="main-result">Main Result</h2>
<figure><img src="/images/post1/result.png">
</figure>

<figure><img src="/images/post1/code.png">
</figure>

<hr>
<p>Citation</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>@article{FunReason,
</span></span><span style="display:flex;"><span>  title={FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement},
</span></span><span style="display:flex;"><span>  author={Bingguang Hao, Maolin Wang, Zengzhuang Xu, Cunyin Peng, Yicheng Chen, Xiangyu Zhao, Jinjie Gu, Chenyi Zhuang},
</span></span><span style="display:flex;"><span>  journal={arXiv preprint arXiv:2505.20192},
</span></span><span style="display:flex;"><span>  year={2025}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
        <div class="share m-2 grid grid-cols-2 lg:grid-cols-3 gap-2">
            <a href="https://twitter.com/intent/tweet?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fchapter-1%2f&text=FunReason%3a%20Enhancing%20Large%20Language%20Models%27%20Function%20Calling%20via%20Self-Refinement%20Multiscale%20Loss%20and%20Automated%20Data%20Refinement" target="_blank"
                title="Post" class="share-button x">
                <div class="text-white text-center">
                    <span class="icon-x text-lg mr-2"></span>X
                </div>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fchapter-1%2f&t=FunReason%3a%20Enhancing%20Large%20Language%20Models%27%20Function%20Calling%20via%20Self-Refinement%20Multiscale%20Loss%20and%20Automated%20Data%20Refinement" target="_blank"
                title="Facebook" class="share-button facebook">
                <div class="text-white text-center">
                    <span class="icon-facebook text-lg mr-2"></span>Facebook
                </div>
            </a>
            <a href="https://b.hatena.ne.jp/add?mode=confirm&url=http%3a%2f%2flocalhost%3a1313%2fblog%2fchapter-1%2f&title=FunReason%3a%20Enhancing%20Large%20Language%20Models%27%20Function%20Calling%20via%20Self-Refinement%20Multiscale%20Loss%20and%20Automated%20Data%20Refinement" target="_blank"
                title="hatena" class="share-button hatena">
                <div class="text-white text-center">
                    <span class="icon-hatenabookmark text-lg mr-2"></span>Hatena
                </div>
            </a>
            <a href="https://getpocket.com/edit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fchapter-1%2f&title=FunReason%3a%20Enhancing%20Large%20Language%20Models%27%20Function%20Calling%20via%20Self-Refinement%20Multiscale%20Loss%20and%20Automated%20Data%20Refinement" target="_blank" title="pocket"
                class="share-button pocket">
                <div class="text-white text-center">
                    <span class="icon-get-pocket text-lg mr-2"></span>Pocket
                </div>
            </a>
            <a href="https://timeline.line.me/social-plugin/share?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fchapter-1%2f" class="share-button line">
                <div class="text-white text-center">
                    <span class="icon-line text-lg mr-2"></span>LINE
                </div>
            </a>
            <a href="javascript:OnClickURL();" class="share-button url" title="Copy to Clipboard"
                data-clipboard-text="FunReason: Enhancing Large Language Models&#39; Function Calling via Self-Refinement Multiscale Loss and Automated Data Refinement http://localhost:1313/blog/chapter-1/" id="url">
                <div class="text-white text-center">
                    <span class="icon-link text-lg mr-2"></span>Copy
                </div>
            </a>
        </div>
        <hr class="py-4">
        <aside id="meta">
            <div class="grid grid-cols-2">
                <div class="col-span-1">
                    
                    <a class="previous lg:text-2xl" href="http://localhost:1313/blog/markdown-syntax/">
                        <div
                            class="transition-colors duration-300 border border-gray-600 hover:border-black h-auto m-3 text-center py-3 lg:py-1">
                            <span class="icon-keyboard_arrow_left"></span> Markdownâ€¦
                        </div>
                    </a>
                    
                </div>
                
            </div>
        </aside>
    </div>
</div>

  </main><footer class="bg-tlgray-100">
  
  <script src='/js/clipboard.min.js'></script>
  <script src='/js/highlight.min.js'></script>
  <script src='/js/highlightjs-line-numbers.min.js'></script>
  <script src='/js/sweetalert2.min.js'></script>
  <script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
    new ClipboardJS('.url');

    function OnClickURL() {
      Swal.fire({
        icon: 'success',
        title: 'Copied!',
        text: 'Copied the URL and title.'
      })
    }
  </script>
  
  <script>
    function toggleNav() {
      var hamburger = document.getElementById("hamburgerbtn");
      var overlay = document.getElementById("overlay");
      var body = document.body;

      hamburger.addEventListener("click", function () {
        overlay.classList.toggle("open");
        hamburger.classList.toggle("is-open");
        body.classList.toggle("scroll-lock");
      });
    }
    toggleNav();

    document.querySelector('.scroll-top').addEventListener('click', () => {
      document.documentElement.scrollTop = 0;
    });
  </script>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Open+Sans&display=swap" rel="stylesheet" />
  
  <div class="flex items-center justify-between flex-wrap bg-gray-800 p-8 text-white">
    <div class="items-center text-xl text-grey-900 mr-6">
      inclusionAI
    </div>
    <div class="w-full block flex-grow lg:flex lg:items-center lg:w-auto" id="mobileMenu">
      <div class="text-lg lg:flex-grow">
      </div>
      <div class="flex flex-row items-center text-lg">
        
        <a href="/" class="block mt-4 lg:inline-block lg:mt-0 text-gray-300 hover:text-white mr-8">
          
          Home
          
        </a>
        
        <a href="https://github.com/inclusionAI" class="block mt-4 lg:inline-block lg:mt-0 text-gray-300 hover:text-white mr-8">
          
          <i class='icon-github text-2xl'></i>
          
        </a>
        
      </div>
    </div>
  </div>
  <div class="copy pl-8 py-5 bg-tlgray-700 text-white text-md">
    &copy; inclusionAI 2025 All Rights Reserved.
  </div>
</footer>
</body>

</html>